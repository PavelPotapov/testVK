# Компонент AudioPlayer

Компонент AudioPlayer предоставляет интерфейс для воспроизведения аудиофайлов с визуализацией звукового спектра на canvas. Он использует MobX для управления состоянием и поддерживает динамическую загрузку и воспроизведение треков.

## Особенности

- **Управление воспроизведением**: Воспроизведение, пауза и перемотка треков.
- **Управление громкостью**: Настройка громкости с помощью ползунка.
- **Визуализация звука**: Отображение спектра аудио на предоставленном canvas с использованием API Canvas.
- **Динамическая загрузка**: Отображение индикаторов загрузки во время получения треков.

## Зависимости

- **MobX**: Для реактивного управления состоянием.
- **mobx-react-lite**: Для интеграции MobX с компонентами React.
- **@vkontakte/vkui**: Используется для компонентов интерфейса, таких как Slider и Div.
- **Canvas API**: Используется для визуализации звука. Canvas передается в компонент через управление состоянием.

## Использование

1. **Настройка компонента**:

   - Убедитесь, что все зависимости установлены.
   - Импортируйте компонент **AudioPlayer** в ваш проект.

2. **Интеграция с MobX**:

   - Компонент использует MobX для управления состоянием аудиоплеера, включая текущий трек, время воспроизведения и состояние воспроизведения.

3. **Визуализация звука на Canvas**:

   - Для визуализации спектра аудио должен быть предоставлен canvas через управление состоянием. Пример использования:
     ```jsx
     audioStore.setCanvas(canvasRef.current)
     ```
   - Canvas должен быть создан заранее и добавлен в хранилище.

4. **Динамическая загрузка и воспроизведение треков**:
   - Компонент поддерживает динамическое изменение треков. При изменении трека визуализация на canvas обновляется автоматически.

## Пропсы

Компонент **AudioPlayer** принимает следующие пропсы:

- **fftSize** (number): Размер FFT (Fast Fourier Transform) для анализа аудио. Определяет количество частотных данных. По умолчанию: 512. Обязательно должен быть степенью 2 и находиться в диапазоне [32, 32768]
- **gapBars** (number): Отступ между столбиками визуализации. По умолчанию: 2.
- **countBars** (number): Количество столбиков визуализации. По умолчанию: 5.
- **borderRadiusBars** (number): Радиус скругления углов столбиков визуализации. По умолчанию: 10.
- **backgroundColorBars** (string): Цвет столбиков визуализации. По умолчанию: `rgb(255, 255, 255)`.

### Дефолтные пропсы

```typescript
export const defaultProps = {
  fftSize: 512,
  gapBars: 2,
  countBars: 5,
  borderRadiusBars: 10,
  backgroundColorBars: `rgb(255, 255, 255)`
}
```
